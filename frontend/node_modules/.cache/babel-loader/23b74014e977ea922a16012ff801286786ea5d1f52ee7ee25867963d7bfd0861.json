{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\angel\\\\Desktop\\\\plataforma_educativa\\\\frontend\\\\src\\\\components\\\\Mensajeria.js\";\nimport React, { useState, useEffect } from 'react';\nimport './Mensajeria.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Mensajeria = ({\n  user\n}) => {\n  const [mensajesRecibidos, setMensajesRecibidos] = useState([]);\n  const [mensajesEnviados, setMensajesEnviados] = useState([]);\n  const [tipoVista, setTipoVista] = useState('recibidos'); // 'recibidos', 'enviados', 'nuevo'\n  const [mensajeSeleccionado, setMensajeSeleccionado] = useState(null);\n  const [usuariosDisponibles, setUsuariosDisponibles] = useState([]);\n  const [buscandoUsuarios, setBuscandoUsuarios] = useState(false);\n  const [busquedaUsuario, setBusquedaUsuario] = useState('');\n  const [nuevoMensaje, setNuevoMensaje] = useState({\n    destinatario: '',\n    destinatarioNombre: '',\n    asunto: '',\n    contenido: ''\n  });\n  const [estadisticas, setEstadisticas] = useState({\n    mensajes_recibidos: 0,\n    mensajes_enviados: 0,\n    mensajes_no_leidos: 0\n  });\n  const [loading, setLoading] = useState(true);\n\n  // Cargar mensajes y estad칤sticas\n  useEffect(() => {\n    cargarMensajes();\n    cargarEstadisticas();\n  }, [user.id, tipoVista]);\n  const cargarMensajes = async () => {\n    try {\n      setLoading(true);\n      if (tipoVista === 'recibidos') {\n        const response = await fetch(`http://localhost:5000/api/mensajes/usuario/${user.id}?tipo=recibidos`);\n        if (response.ok) {\n          const data = await response.json();\n          setMensajesRecibidos(data.data || []);\n        }\n      } else if (tipoVista === 'enviados') {\n        const response = await fetch(`http://localhost:5000/api/mensajes/usuario/${user.id}?tipo=enviados`);\n        if (response.ok) {\n          const data = await response.json();\n          setMensajesEnviados(data.data || []);\n        }\n      }\n    } catch (error) {\n      console.error('Error al cargar mensajes:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const cargarEstadisticas = async () => {\n    try {\n      const response = await fetch(`http://localhost:5000/api/mensajes/estadisticas/${user.id}`);\n      if (response.ok) {\n        const data = await response.json();\n        setEstadisticas(data.data || estadisticas);\n      }\n    } catch (error) {\n      console.error('Error al cargar estad칤sticas:', error);\n    }\n  };\n\n  // Buscar usuarios para enviar mensaje\n  const buscarUsuarios = async termino => {\n    if (termino.length < 2) {\n      setUsuariosDisponibles([]);\n      return;\n    }\n    try {\n      setBuscandoUsuarios(true);\n      // Intentar obtener usuarios desde el endpoint de admin, si no est치 disponible, usar una lista b치sica\n      let response;\n      try {\n        response = await fetch(`http://localhost:5000/api/admin/usuarios`);\n      } catch (e) {\n        // Si el usuario no es admin, intentar obtener usuarios de otra forma\n        response = await fetch(`http://localhost:5000/api/usuarios`);\n      }\n      if (response && response.ok) {\n        const data = await response.json();\n        const usuarios = data.data || data || [];\n        const usuariosFiltrados = usuarios.filter(u => {\n          var _u$nombre, _u$apellido, _u$correo;\n          return u.activo !== false && u.id_usuario !== user.id && (((_u$nombre = u.nombre) === null || _u$nombre === void 0 ? void 0 : _u$nombre.toLowerCase().includes(termino.toLowerCase())) || ((_u$apellido = u.apellido) === null || _u$apellido === void 0 ? void 0 : _u$apellido.toLowerCase().includes(termino.toLowerCase())) || ((_u$correo = u.correo) === null || _u$correo === void 0 ? void 0 : _u$correo.toLowerCase().includes(termino.toLowerCase())) || u.rol && u.rol.toLowerCase().includes(termino.toLowerCase()));\n        });\n        setUsuariosDisponibles(usuariosFiltrados.slice(0, 10)); // Limitar a 10 resultados\n      }\n    } catch (error) {\n      console.error('Error al buscar usuarios:', error);\n    } finally {\n      setBuscandoUsuarios(false);\n    }\n  };\n\n  // Seleccionar destinatario\n  const seleccionarDestinatario = usuario => {\n    setNuevoMensaje({\n      ...nuevoMensaje,\n      destinatario: usuario.id_usuario,\n      destinatarioNombre: `${usuario.nombre} ${usuario.apellido} (${usuario.rol})`\n    });\n    setUsuariosDisponibles([]);\n    setBusquedaUsuario('');\n  };\n\n  // Enviar mensaje\n  const enviarMensaje = async e => {\n    e.preventDefault();\n    if (!nuevoMensaje.destinatario || !nuevoMensaje.contenido) {\n      alert('Debe seleccionar un destinatario y escribir un mensaje');\n      return;\n    }\n    try {\n      const response = await fetch('http://localhost:5000/api/mensajes', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          id_remitente: user.id,\n          id_destinatario: parseInt(nuevoMensaje.destinatario),\n          asunto: nuevoMensaje.asunto || 'Sin asunto',\n          contenido: nuevoMensaje.contenido\n        })\n      });\n      if (response.ok) {\n        alert('Mensaje enviado exitosamente');\n        setNuevoMensaje({\n          destinatario: '',\n          destinatarioNombre: '',\n          asunto: '',\n          contenido: ''\n        });\n        setTipoVista('enviados');\n        await cargarMensajes();\n        await cargarEstadisticas();\n      } else {\n        const error = await response.json();\n        alert(`Error al enviar mensaje: ${error.message}`);\n      }\n    } catch (error) {\n      console.error('Error al enviar mensaje:', error);\n      alert('Error de conexi칩n al enviar el mensaje');\n    }\n  };\n\n  // Marcar mensaje como le칤do\n  const marcarComoLeido = async idMensaje => {\n    try {\n      const response = await fetch(`http://localhost:5000/api/mensajes/${idMensaje}/leido`, {\n        method: 'PUT'\n      });\n      if (response.ok) {\n        await cargarMensajes();\n        await cargarEstadisticas();\n      }\n    } catch (error) {\n      console.error('Error al marcar mensaje como le칤do:', error);\n    }\n  };\n\n  // Ver detalles del mensaje\n  const verMensaje = async mensaje => {\n    setMensajeSeleccionado(mensaje);\n    if (!mensaje.leido && tipoVista === 'recibidos') {\n      await marcarComoLeido(mensaje.id_mensaje);\n    }\n  };\n  const mensajesActuales = tipoVista === 'recibidos' ? mensajesRecibidos : mensajesEnviados;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mensajeria-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mensajeria-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDCE7 Sistema de Mensajer\\xEDa\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mensajeria-stats\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"stat-label\",\n            children: \"Recibidos:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"stat-value\",\n            children: estadisticas.mensajes_recibidos\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"stat-label\",\n            children: \"Enviados:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"stat-value\",\n            children: estadisticas.mensajes_enviados\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-item unread\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"stat-label\",\n            children: \"No le\\xEDdos:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"stat-value\",\n            children: estadisticas.mensajes_no_leidos\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mensajeria-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mensajeria-nav\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `nav-btn ${tipoVista === 'recibidos' ? 'active' : ''}`,\n          onClick: () => {\n            setTipoVista('recibidos');\n            setMensajeSeleccionado(null);\n          },\n          children: [\"\\uD83D\\uDCE5 Recibidos \", estadisticas.mensajes_no_leidos > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"badge\",\n            children: estadisticas.mensajes_no_leidos\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `nav-btn ${tipoVista === 'enviados' ? 'active' : ''}`,\n          onClick: () => {\n            setTipoVista('enviados');\n            setMensajeSeleccionado(null);\n          },\n          children: \"\\uD83D\\uDCE4 Enviados\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `nav-btn ${tipoVista === 'nuevo' ? 'active' : ''}`,\n          onClick: () => {\n            setTipoVista('nuevo');\n            setMensajeSeleccionado(null);\n          },\n          children: \"\\u2709\\uFE0F Nuevo Mensaje\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mensajeria-main\",\n        children: tipoVista === 'nuevo' ?\n        /*#__PURE__*/\n        /* Formulario para nuevo mensaje */\n        _jsxDEV(\"div\", {\n          className: \"mensajeria-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Escribir Nuevo Mensaje\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: enviarMensaje,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Destinatario: *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"destinatario-search\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: busquedaUsuario,\n                  onChange: e => {\n                    setBusquedaUsuario(e.target.value);\n                    buscarUsuarios(e.target.value);\n                  },\n                  placeholder: \"Buscar por nombre, apellido, correo o rol...\",\n                  className: \"search-input\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 41\n                }, this), buscandoUsuarios && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"loading-spinner-small\",\n                  children: \"Buscando...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 45\n                }, this), usuariosDisponibles.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"usuarios-dropdown\",\n                  children: usuariosDisponibles.map(usuario => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"usuario-option\",\n                    onClick: () => seleccionarDestinatario(usuario),\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"usuario-info\",\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: [usuario.nombre, \" \", usuario.apellido]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 271,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"usuario-rol\",\n                        children: usuario.rol\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 272,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 270,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"usuario-email\",\n                      children: usuario.correo\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 274,\n                      columnNumber: 57\n                    }, this)]\n                  }, usuario.id_usuario, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 265,\n                    columnNumber: 53\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 37\n              }, this), nuevoMensaje.destinatarioNombre && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"destinatario-selected\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Destinatario seleccionado:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 45\n                }, this), \" \", nuevoMensaje.destinatarioNombre, /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn-remove\",\n                  onClick: () => {\n                    setNuevoMensaje({\n                      ...nuevoMensaje,\n                      destinatario: '',\n                      destinatarioNombre: ''\n                    });\n                  },\n                  children: \"\\xD7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Asunto:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: nuevoMensaje.asunto,\n                onChange: e => setNuevoMensaje({\n                  ...nuevoMensaje,\n                  asunto: e.target.value\n                }),\n                placeholder: \"Asunto del mensaje (opcional)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Mensaje: *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: nuevoMensaje.contenido,\n                onChange: e => setNuevoMensaje({\n                  ...nuevoMensaje,\n                  contenido: e.target.value\n                }),\n                placeholder: \"Escribe tu mensaje aqu\\xED...\",\n                rows: \"8\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn-primary\",\n                children: \"\\uD83D\\uDCE4 Enviar Mensaje\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn-secondary\",\n                onClick: () => {\n                  setNuevoMensaje({\n                    destinatario: '',\n                    destinatarioNombre: '',\n                    asunto: '',\n                    contenido: ''\n                  });\n                  setBusquedaUsuario('');\n                  setUsuariosDisponibles([]);\n                },\n                children: \"Limpiar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 25\n        }, this) :\n        /*#__PURE__*/\n        /* Lista de mensajes y vista de detalle */\n        _jsxDEV(\"div\", {\n          className: \"mensajeria-list-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mensajes-list\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: tipoVista === 'recibidos' ? 'Mensajes Recibidos' : 'Mensajes Enviados'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 33\n            }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading\",\n              children: \"Cargando mensajes...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 37\n            }, this) : mensajesActuales.length > 0 ? mensajesActuales.map(mensaje => {\n              const remitenteNombre = tipoVista === 'recibidos' ? `${mensaje.remitente_nombre} ${mensaje.remitente_apellido}` : `${mensaje.destinatario_nombre} ${mensaje.destinatario_apellido}`;\n              const remitenteRol = tipoVista === 'recibidos' ? mensaje.remitente_rol : mensaje.destinatario_rol;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `mensaje-item ${!mensaje.leido && tipoVista === 'recibidos' ? 'unread' : ''} ${(mensajeSeleccionado === null || mensajeSeleccionado === void 0 ? void 0 : mensajeSeleccionado.id_mensaje) === mensaje.id_mensaje ? 'selected' : ''}`,\n                onClick: () => verMensaje(mensaje),\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mensaje-header\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mensaje-sender\",\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: remitenteNombre\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 365,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"mensaje-rol\",\n                      children: remitenteRol\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 366,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 364,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mensaje-meta\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"mensaje-date\",\n                      children: new Date(mensaje.fecha_envio).toLocaleString()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 369,\n                      columnNumber: 57\n                    }, this), !mensaje.leido && tipoVista === 'recibidos' && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"badge-unread\",\n                      children: \"Nuevo\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 373,\n                      columnNumber: 61\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 368,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mensaje-subject\",\n                  children: mensaje.asunto || 'Sin asunto'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 377,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mensaje-preview\",\n                  children: [mensaje.contenido.substring(0, 100), mensaje.contenido.length > 100 && '...']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 380,\n                  columnNumber: 49\n                }, this)]\n              }, mensaje.id_mensaje, true, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 45\n              }, this);\n            }) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"no-messages\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"No hay mensajes \", tipoVista === 'recibidos' ? 'recibidos' : 'enviados', \".\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 29\n          }, this), mensajeSeleccionado && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mensaje-detail\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mensaje-detail-header\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-close\",\n                onClick: () => setMensajeSeleccionado(null),\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mensaje-detail-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mensaje-detail-meta\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: tipoVista === 'recibidos' ? `${mensajeSeleccionado.remitente_nombre} ${mensajeSeleccionado.remitente_apellido}` : `${mensajeSeleccionado.destinatario_nombre} ${mensajeSeleccionado.destinatario_apellido}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 408,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"mensaje-rol\",\n                    children: [\"(\", tipoVista === 'recibidos' ? mensajeSeleccionado.remitente_rol : mensajeSeleccionado.destinatario_rol, \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 414,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 407,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mensaje-detail-date\",\n                  children: new Date(mensajeSeleccionado.fecha_envio).toLocaleString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 421,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mensaje-detail-subject\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Asunto:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 426,\n                  columnNumber: 45\n                }, this), \" \", mensajeSeleccionado.asunto || 'Sin asunto']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mensaje-detail-body\",\n                children: mensajeSeleccionado.contenido\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 41\n              }, this), tipoVista === 'recibidos' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mensaje-detail-actions\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-primary\",\n                  onClick: () => {\n                    setTipoVista('nuevo');\n                    setNuevoMensaje({\n                      destinatario: mensajeSeleccionado.remitente_nombre ? '' : '',\n                      destinatarioNombre: '',\n                      asunto: `Re: ${mensajeSeleccionado.asunto || ''}`,\n                      contenido: `\\n\\n--- Mensaje original ---\\n${mensajeSeleccionado.contenido}`\n                    });\n                    setMensajeSeleccionado(null);\n                  },\n                  children: \"\\uD83D\\uDCE7 Responder\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 433,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 9\n  }, this);\n};\nexport default Mensajeria;","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","Mensajeria","user","mensajesRecibidos","setMensajesRecibidos","mensajesEnviados","setMensajesEnviados","tipoVista","setTipoVista","mensajeSeleccionado","setMensajeSeleccionado","usuariosDisponibles","setUsuariosDisponibles","buscandoUsuarios","setBuscandoUsuarios","busquedaUsuario","setBusquedaUsuario","nuevoMensaje","setNuevoMensaje","destinatario","destinatarioNombre","asunto","contenido","estadisticas","setEstadisticas","mensajes_recibidos","mensajes_enviados","mensajes_no_leidos","loading","setLoading","cargarMensajes","cargarEstadisticas","id","response","fetch","ok","data","json","error","console","buscarUsuarios","termino","length","e","usuarios","usuariosFiltrados","filter","u","_u$nombre","_u$apellido","_u$correo","activo","id_usuario","nombre","toLowerCase","includes","apellido","correo","rol","slice","seleccionarDestinatario","usuario","enviarMensaje","preventDefault","alert","method","headers","body","JSON","stringify","id_remitente","id_destinatario","parseInt","message","marcarComoLeido","idMensaje","verMensaje","mensaje","leido","id_mensaje","mensajesActuales","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSubmit","type","value","onChange","target","placeholder","map","rows","required","remitenteNombre","remitente_nombre","remitente_apellido","destinatario_nombre","destinatario_apellido","remitenteRol","remitente_rol","destinatario_rol","Date","fecha_envio","toLocaleString","substring"],"sources":["C:/Users/angel/Desktop/plataforma_educativa/frontend/src/components/Mensajeria.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './Mensajeria.css';\r\n\r\nconst Mensajeria = ({ user }) => {\r\n    const [mensajesRecibidos, setMensajesRecibidos] = useState([]);\r\n    const [mensajesEnviados, setMensajesEnviados] = useState([]);\r\n    const [tipoVista, setTipoVista] = useState('recibidos'); // 'recibidos', 'enviados', 'nuevo'\r\n    const [mensajeSeleccionado, setMensajeSeleccionado] = useState(null);\r\n    const [usuariosDisponibles, setUsuariosDisponibles] = useState([]);\r\n    const [buscandoUsuarios, setBuscandoUsuarios] = useState(false);\r\n    const [busquedaUsuario, setBusquedaUsuario] = useState('');\r\n    const [nuevoMensaje, setNuevoMensaje] = useState({\r\n        destinatario: '',\r\n        destinatarioNombre: '',\r\n        asunto: '',\r\n        contenido: ''\r\n    });\r\n    const [estadisticas, setEstadisticas] = useState({\r\n        mensajes_recibidos: 0,\r\n        mensajes_enviados: 0,\r\n        mensajes_no_leidos: 0\r\n    });\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // Cargar mensajes y estad칤sticas\r\n    useEffect(() => {\r\n        cargarMensajes();\r\n        cargarEstadisticas();\r\n    }, [user.id, tipoVista]);\r\n\r\n    const cargarMensajes = async () => {\r\n        try {\r\n            setLoading(true);\r\n            if (tipoVista === 'recibidos') {\r\n                const response = await fetch(`http://localhost:5000/api/mensajes/usuario/${user.id}?tipo=recibidos`);\r\n                if (response.ok) {\r\n                    const data = await response.json();\r\n                    setMensajesRecibidos(data.data || []);\r\n                }\r\n            } else if (tipoVista === 'enviados') {\r\n                const response = await fetch(`http://localhost:5000/api/mensajes/usuario/${user.id}?tipo=enviados`);\r\n                if (response.ok) {\r\n                    const data = await response.json();\r\n                    setMensajesEnviados(data.data || []);\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al cargar mensajes:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const cargarEstadisticas = async () => {\r\n        try {\r\n            const response = await fetch(`http://localhost:5000/api/mensajes/estadisticas/${user.id}`);\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setEstadisticas(data.data || estadisticas);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al cargar estad칤sticas:', error);\r\n        }\r\n    };\r\n\r\n    // Buscar usuarios para enviar mensaje\r\n    const buscarUsuarios = async (termino) => {\r\n        if (termino.length < 2) {\r\n            setUsuariosDisponibles([]);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setBuscandoUsuarios(true);\r\n            // Intentar obtener usuarios desde el endpoint de admin, si no est치 disponible, usar una lista b치sica\r\n            let response;\r\n            try {\r\n                response = await fetch(`http://localhost:5000/api/admin/usuarios`);\r\n            } catch (e) {\r\n                // Si el usuario no es admin, intentar obtener usuarios de otra forma\r\n                response = await fetch(`http://localhost:5000/api/usuarios`);\r\n            }\r\n            \r\n            if (response && response.ok) {\r\n                const data = await response.json();\r\n                const usuarios = data.data || data || [];\r\n                const usuariosFiltrados = usuarios.filter(u => \r\n                    u.activo !== false && \r\n                    u.id_usuario !== user.id &&\r\n                    (u.nombre?.toLowerCase().includes(termino.toLowerCase()) ||\r\n                     u.apellido?.toLowerCase().includes(termino.toLowerCase()) ||\r\n                     u.correo?.toLowerCase().includes(termino.toLowerCase()) ||\r\n                     (u.rol && u.rol.toLowerCase().includes(termino.toLowerCase())))\r\n                );\r\n                setUsuariosDisponibles(usuariosFiltrados.slice(0, 10)); // Limitar a 10 resultados\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al buscar usuarios:', error);\r\n        } finally {\r\n            setBuscandoUsuarios(false);\r\n        }\r\n    };\r\n\r\n    // Seleccionar destinatario\r\n    const seleccionarDestinatario = (usuario) => {\r\n        setNuevoMensaje({\r\n            ...nuevoMensaje,\r\n            destinatario: usuario.id_usuario,\r\n            destinatarioNombre: `${usuario.nombre} ${usuario.apellido} (${usuario.rol})`\r\n        });\r\n        setUsuariosDisponibles([]);\r\n        setBusquedaUsuario('');\r\n    };\r\n\r\n    // Enviar mensaje\r\n    const enviarMensaje = async (e) => {\r\n        e.preventDefault();\r\n        \r\n        if (!nuevoMensaje.destinatario || !nuevoMensaje.contenido) {\r\n            alert('Debe seleccionar un destinatario y escribir un mensaje');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch('http://localhost:5000/api/mensajes', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    id_remitente: user.id,\r\n                    id_destinatario: parseInt(nuevoMensaje.destinatario),\r\n                    asunto: nuevoMensaje.asunto || 'Sin asunto',\r\n                    contenido: nuevoMensaje.contenido\r\n                }),\r\n            });\r\n\r\n            if (response.ok) {\r\n                alert('Mensaje enviado exitosamente');\r\n                setNuevoMensaje({\r\n                    destinatario: '',\r\n                    destinatarioNombre: '',\r\n                    asunto: '',\r\n                    contenido: ''\r\n                });\r\n                setTipoVista('enviados');\r\n                await cargarMensajes();\r\n                await cargarEstadisticas();\r\n            } else {\r\n                const error = await response.json();\r\n                alert(`Error al enviar mensaje: ${error.message}`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al enviar mensaje:', error);\r\n            alert('Error de conexi칩n al enviar el mensaje');\r\n        }\r\n    };\r\n\r\n    // Marcar mensaje como le칤do\r\n    const marcarComoLeido = async (idMensaje) => {\r\n        try {\r\n            const response = await fetch(`http://localhost:5000/api/mensajes/${idMensaje}/leido`, {\r\n                method: 'PUT',\r\n            });\r\n\r\n            if (response.ok) {\r\n                await cargarMensajes();\r\n                await cargarEstadisticas();\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al marcar mensaje como le칤do:', error);\r\n        }\r\n    };\r\n\r\n    // Ver detalles del mensaje\r\n    const verMensaje = async (mensaje) => {\r\n        setMensajeSeleccionado(mensaje);\r\n        if (!mensaje.leido && tipoVista === 'recibidos') {\r\n            await marcarComoLeido(mensaje.id_mensaje);\r\n        }\r\n    };\r\n\r\n    const mensajesActuales = tipoVista === 'recibidos' ? mensajesRecibidos : mensajesEnviados;\r\n\r\n    return (\r\n        <div className=\"mensajeria-container\">\r\n            <div className=\"mensajeria-header\">\r\n                <h2>游닎 Sistema de Mensajer칤a</h2>\r\n                <div className=\"mensajeria-stats\">\r\n                    <div className=\"stat-item\">\r\n                        <span className=\"stat-label\">Recibidos:</span>\r\n                        <span className=\"stat-value\">{estadisticas.mensajes_recibidos}</span>\r\n                    </div>\r\n                    <div className=\"stat-item\">\r\n                        <span className=\"stat-label\">Enviados:</span>\r\n                        <span className=\"stat-value\">{estadisticas.mensajes_enviados}</span>\r\n                    </div>\r\n                    <div className=\"stat-item unread\">\r\n                        <span className=\"stat-label\">No le칤dos:</span>\r\n                        <span className=\"stat-value\">{estadisticas.mensajes_no_leidos}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"mensajeria-content\">\r\n                {/* Barra de navegaci칩n */}\r\n                <div className=\"mensajeria-nav\">\r\n                    <button\r\n                        className={`nav-btn ${tipoVista === 'recibidos' ? 'active' : ''}`}\r\n                        onClick={() => {\r\n                            setTipoVista('recibidos');\r\n                            setMensajeSeleccionado(null);\r\n                        }}\r\n                    >\r\n                        游닌 Recibidos {estadisticas.mensajes_no_leidos > 0 && (\r\n                            <span className=\"badge\">{estadisticas.mensajes_no_leidos}</span>\r\n                        )}\r\n                    </button>\r\n                    <button\r\n                        className={`nav-btn ${tipoVista === 'enviados' ? 'active' : ''}`}\r\n                        onClick={() => {\r\n                            setTipoVista('enviados');\r\n                            setMensajeSeleccionado(null);\r\n                        }}\r\n                    >\r\n                        游닋 Enviados\r\n                    </button>\r\n                    <button\r\n                        className={`nav-btn ${tipoVista === 'nuevo' ? 'active' : ''}`}\r\n                        onClick={() => {\r\n                            setTipoVista('nuevo');\r\n                            setMensajeSeleccionado(null);\r\n                        }}\r\n                    >\r\n                        九괦잺 Nuevo Mensaje\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Contenido principal */}\r\n                <div className=\"mensajeria-main\">\r\n                    {tipoVista === 'nuevo' ? (\r\n                        /* Formulario para nuevo mensaje */\r\n                        <div className=\"mensajeria-form\">\r\n                            <h3>Escribir Nuevo Mensaje</h3>\r\n                            <form onSubmit={enviarMensaje}>\r\n                                <div className=\"form-group\">\r\n                                    <label>Destinatario: *</label>\r\n                                    <div className=\"destinatario-search\">\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={busquedaUsuario}\r\n                                            onChange={(e) => {\r\n                                                setBusquedaUsuario(e.target.value);\r\n                                                buscarUsuarios(e.target.value);\r\n                                            }}\r\n                                            placeholder=\"Buscar por nombre, apellido, correo o rol...\"\r\n                                            className=\"search-input\"\r\n                                        />\r\n                                        {buscandoUsuarios && (\r\n                                            <div className=\"loading-spinner-small\">Buscando...</div>\r\n                                        )}\r\n                                        {usuariosDisponibles.length > 0 && (\r\n                                            <div className=\"usuarios-dropdown\">\r\n                                                {usuariosDisponibles.map(usuario => (\r\n                                                    <div\r\n                                                        key={usuario.id_usuario}\r\n                                                        className=\"usuario-option\"\r\n                                                        onClick={() => seleccionarDestinatario(usuario)}\r\n                                                    >\r\n                                                        <div className=\"usuario-info\">\r\n                                                            <strong>{usuario.nombre} {usuario.apellido}</strong>\r\n                                                            <span className=\"usuario-rol\">{usuario.rol}</span>\r\n                                                        </div>\r\n                                                        <div className=\"usuario-email\">{usuario.correo}</div>\r\n                                                    </div>\r\n                                                ))}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                    {nuevoMensaje.destinatarioNombre && (\r\n                                        <div className=\"destinatario-selected\">\r\n                                            <strong>Destinatario seleccionado:</strong> {nuevoMensaje.destinatarioNombre}\r\n                                            <button\r\n                                                type=\"button\"\r\n                                                className=\"btn-remove\"\r\n                                                onClick={() => {\r\n                                                    setNuevoMensaje({\r\n                                                        ...nuevoMensaje,\r\n                                                        destinatario: '',\r\n                                                        destinatarioNombre: ''\r\n                                                    });\r\n                                                }}\r\n                                            >\r\n                                                칑\r\n                                            </button>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                                <div className=\"form-group\">\r\n                                    <label>Asunto:</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={nuevoMensaje.asunto}\r\n                                        onChange={(e) => setNuevoMensaje({...nuevoMensaje, asunto: e.target.value})}\r\n                                        placeholder=\"Asunto del mensaje (opcional)\"\r\n                                    />\r\n                                </div>\r\n                                <div className=\"form-group\">\r\n                                    <label>Mensaje: *</label>\r\n                                    <textarea\r\n                                        value={nuevoMensaje.contenido}\r\n                                        onChange={(e) => setNuevoMensaje({...nuevoMensaje, contenido: e.target.value})}\r\n                                        placeholder=\"Escribe tu mensaje aqu칤...\"\r\n                                        rows=\"8\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <div className=\"form-actions\">\r\n                                    <button type=\"submit\" className=\"btn-primary\">\r\n                                        游닋 Enviar Mensaje\r\n                                    </button>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        className=\"btn-secondary\"\r\n                                        onClick={() => {\r\n                                            setNuevoMensaje({\r\n                                                destinatario: '',\r\n                                                destinatarioNombre: '',\r\n                                                asunto: '',\r\n                                                contenido: ''\r\n                                            });\r\n                                            setBusquedaUsuario('');\r\n                                            setUsuariosDisponibles([]);\r\n                                        }}\r\n                                    >\r\n                                        Limpiar\r\n                                    </button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    ) : (\r\n                        /* Lista de mensajes y vista de detalle */\r\n                        <div className=\"mensajeria-list-container\">\r\n                            <div className=\"mensajes-list\">\r\n                                <h3>{tipoVista === 'recibidos' ? 'Mensajes Recibidos' : 'Mensajes Enviados'}</h3>\r\n                                {loading ? (\r\n                                    <div className=\"loading\">Cargando mensajes...</div>\r\n                                ) : mensajesActuales.length > 0 ? (\r\n                                    mensajesActuales.map(mensaje => {\r\n                                        const remitenteNombre = tipoVista === 'recibidos' \r\n                                            ? `${mensaje.remitente_nombre} ${mensaje.remitente_apellido}`\r\n                                            : `${mensaje.destinatario_nombre} ${mensaje.destinatario_apellido}`;\r\n                                        const remitenteRol = tipoVista === 'recibidos'\r\n                                            ? mensaje.remitente_rol\r\n                                            : mensaje.destinatario_rol;\r\n\r\n                                        return (\r\n                                            <div\r\n                                                key={mensaje.id_mensaje}\r\n                                                className={`mensaje-item ${!mensaje.leido && tipoVista === 'recibidos' ? 'unread' : ''} ${mensajeSeleccionado?.id_mensaje === mensaje.id_mensaje ? 'selected' : ''}`}\r\n                                                onClick={() => verMensaje(mensaje)}\r\n                                            >\r\n                                                <div className=\"mensaje-header\">\r\n                                                    <div className=\"mensaje-sender\">\r\n                                                        <strong>{remitenteNombre}</strong>\r\n                                                        <span className=\"mensaje-rol\">{remitenteRol}</span>\r\n                                                    </div>\r\n                                                    <div className=\"mensaje-meta\">\r\n                                                        <span className=\"mensaje-date\">\r\n                                                            {new Date(mensaje.fecha_envio).toLocaleString()}\r\n                                                        </span>\r\n                                                        {!mensaje.leido && tipoVista === 'recibidos' && (\r\n                                                            <span className=\"badge-unread\">Nuevo</span>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"mensaje-subject\">\r\n                                                    {mensaje.asunto || 'Sin asunto'}\r\n                                                </div>\r\n                                                <div className=\"mensaje-preview\">\r\n                                                    {mensaje.contenido.substring(0, 100)}\r\n                                                    {mensaje.contenido.length > 100 && '...'}\r\n                                                </div>\r\n                                            </div>\r\n                                        );\r\n                                    })\r\n                                ) : (\r\n                                    <div className=\"no-messages\">\r\n                                        <p>No hay mensajes {tipoVista === 'recibidos' ? 'recibidos' : 'enviados'}.</p>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Vista de detalle del mensaje */}\r\n                            {mensajeSeleccionado && (\r\n                                <div className=\"mensaje-detail\">\r\n                                    <div className=\"mensaje-detail-header\">\r\n                                        <button\r\n                                            className=\"btn-close\"\r\n                                            onClick={() => setMensajeSeleccionado(null)}\r\n                                        >\r\n                                            칑\r\n                                        </button>\r\n                                    </div>\r\n                                    <div className=\"mensaje-detail-content\">\r\n                                        <div className=\"mensaje-detail-meta\">\r\n                                            <div>\r\n                                                <strong>\r\n                                                    {tipoVista === 'recibidos'\r\n                                                        ? `${mensajeSeleccionado.remitente_nombre} ${mensajeSeleccionado.remitente_apellido}`\r\n                                                        : `${mensajeSeleccionado.destinatario_nombre} ${mensajeSeleccionado.destinatario_apellido}`\r\n                                                    }\r\n                                                </strong>\r\n                                                <span className=\"mensaje-rol\">\r\n                                                    ({tipoVista === 'recibidos'\r\n                                                        ? mensajeSeleccionado.remitente_rol\r\n                                                        : mensajeSeleccionado.destinatario_rol\r\n                                                    })\r\n                                                </span>\r\n                                            </div>\r\n                                            <div className=\"mensaje-detail-date\">\r\n                                                {new Date(mensajeSeleccionado.fecha_envio).toLocaleString()}\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"mensaje-detail-subject\">\r\n                                            <strong>Asunto:</strong> {mensajeSeleccionado.asunto || 'Sin asunto'}\r\n                                        </div>\r\n                                        <div className=\"mensaje-detail-body\">\r\n                                            {mensajeSeleccionado.contenido}\r\n                                        </div>\r\n                                        {tipoVista === 'recibidos' && (\r\n                                            <div className=\"mensaje-detail-actions\">\r\n                                                <button\r\n                                                    className=\"btn-primary\"\r\n                                                    onClick={() => {\r\n                                                        setTipoVista('nuevo');\r\n                                                        setNuevoMensaje({\r\n                                                            destinatario: mensajeSeleccionado.remitente_nombre ? '' : '',\r\n                                                            destinatarioNombre: '',\r\n                                                            asunto: `Re: ${mensajeSeleccionado.asunto || ''}`,\r\n                                                            contenido: `\\n\\n--- Mensaje original ---\\n${mensajeSeleccionado.contenido}`\r\n                                                        });\r\n                                                        setMensajeSeleccionado(null);\r\n                                                    }}\r\n                                                >\r\n                                                    游닎 Responder\r\n                                                </button>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Mensajeria;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}